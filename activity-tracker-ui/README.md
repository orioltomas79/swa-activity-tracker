# Readme file

## How to run the app

Run the activity tracker api. Follow the readme.md instructions.

To run the UI in our local environment call:

1. dev
2. swa:start

## Front end architecture

### Vite

This is a type script react app created with vite.

### Static web apps authentication/authorization

TBC - staticwebapp.config.json

### REST api autogenerated client

We have a nswag dev dependecy in the package.json. This tool allow us to autogenerate a client to call the api using axios.

If the api changes, we have to regenerate the client calling the api:generate npm script.

The code is saved to /src/api/apiClient.g.nswag.ts. It has:

- A class for each group of requests (ActivityTypesClient, ActivitiesClient,...) which contains the functions to call the api endpoints.
- Interfaces for all request/responses. For example, ActivityType, Activity,... We can use these interfaces to represent our domain model in the UI.
- An ApiException with status numbers and message which extens Type Script Error.
- A throw exception function which returns and ApiException.

If the http response status code is not 2xx, an ApiException is thrown.

#### apiClient.ts

In the same folder we created an apiClient.ts which is a wrapper to the autogenerated client.

The construtor instantiates axios an one instance for each client (ActivityTypesClient, ActivitiesClient,...)

### React router

The createBrowserRouter is called in the main.tsx file. It mapps the paths with the components.

The root element is the ResponsiveDrawer components (Material UI). The ResponsiveDrawer component uses useNavigate to redirect the user to the right path when the menu options are clicked.

In the features folder there is a subfolder for each feature. For each feature there is an index.tsx file which contains the main component of the feature.

### Redux and Redux toolkit

In the app folder we defined 2 files (store.ts and hooks.ts).

In the store.ts file we configure the store specifing the reducers. In the hooks.ts file we define our useAppDispatch and useAppSelector hooks.

As usual the provider with the store is specified in the main.tsx file.

In the features folder we have a subfolder for each feature which also has another subfolder called store. This folder contains 4 files:

- actions.ts: The actions (fetchActivityTypes, postActivityTypes) to call the api are created using createAsyncThunk.
- types.ts: Defines the activity types state (interface) and creates the initial state.
- reducer.ts: The reducer is defined to define what has to happen when the action changes to pending, fulfilled and rejected.
- selectors.ts: We can define selectors to get data from the store

The components uses useAppDispatch to dispatch an Action and useAppSelector to get data from the store.

### Formik and Yup

We use Formik to define forms (add new items to the store) and Yup to validate the fields on the client side.

### Material UI
